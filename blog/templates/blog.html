{% extends "base.html" %}

{% block blog %}
class="current"
{% endblock %}

{%block blog2%}blog{%endblock%}

{% block content %}

{% for post in entries.object_list %}

<article class="post">
	<header><h3><a href="/g/blog/post/{{post.slug}}">{{ post.title }}</a></h3>
		<p class="postinfo">Published on <time>{{ post.created }}</time> under 
			{% for tag in post.tags.all %} <a href="/g/blog/tag/{{tag}}">{{tag}}</a>{% if not forloop.last %}, {% endif %}{% empty%} no categories{% endfor %}
		</p>
	</header>

	<p>{{ post.body|safe|truncatewords_html:"150" }} <a href="/g/blog/post/{{post.slug}}">(Read full page)</a></p>
</article>


{% empty %}
No blog postings found.

{% endfor %}

<div id='result{{entries.next_page_number}}' ></div>

    {% if entries.object_list and entries.paginator.num_pages > 1 %}
<div id="pagination">
        {% if entries.number > 1%}
        <a class="prevpage" href="?page={{ entries.previous_page_number}}">Previous page</a>
        {% endif %}




    <div id="footerpage"> Page {{ entries.number }} of {{ entries.paginator.num_pages }}</div>
    
        {% if entries.number < entries.paginator.num_pages %}

<script type="text/javascript" charset="utf-8">        
$(document).ready(function () {
    $("#page{{entries.next_page_number}}").removeAttr("href");
    $("#page{{entries.next_page_number}}").click(function () {
        $("#pagination").css("display", "none");
        $("#result{{entries.next_page_number}}").load("/g/blog/ajax?page={{entries.next_page_number}}");
            });
        });
</script>

        <a class="nextpage" id="page{{entries.next_page_number}}" href="?page={{entries.next_page_number}}">Next Page</a>
        {% endif %}
</div>
    {% endif %}

        <div class="clear"></div>
</div>
</section>


{% endblock %}   


{% block sidebar %}
{% include "sidebar.html" %}
{% endblock %}
